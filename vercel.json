// {
//   "version": 2,
//   "builds": [
//     {
//       "src": "./index.js",
//       "use": "@vercel/node"
//     }
//   ],
//   "rewrites": [
//     {
//       "source": "/(.*)",
//       "destination": "/"
//     }
//   ]
// }

{
  "version": 2,
  "builds": [
    {
      "src": "./index.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/url/shorten",
      "methods": ["POST", "OPTIONS"], // Allow POST and OPTIONS for /url/shorten
      "headers": {
        "Access-Control-Allow-Origin": "http://localhost:3000",
        "Access-Control-Allow-Methods": "POST, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type"
      }
    },
    {
      "src": "/url/red/history",
      "methods": ["GET", "OPTIONS"], // Allow GET and OPTIONS for /url/red/history
      "headers": {
        "Access-Control-Allow-Origin": "http://localhost:3000",
        "Access-Control-Allow-Methods": "GET, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type"
      }
    },
    {
      "src": "/url/(.*)", // Catch-all for /url/:slug
      "methods": ["GET", "OPTIONS"], // Allow GET and OPTIONS for /url/:slug
      "headers": {
        "Access-Control-Allow-Origin": "http://localhost:3000",
        "Access-Control-Allow-Methods": "GET, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type"
      }
    },
    {
      "src": "/(.*)", // Fallback route for all other requests
      "dest": "/"
    }
  ]
}
